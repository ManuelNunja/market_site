<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Market</title>
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script src="js/app.js"></script>
    <link href="css/style.css" rel="stylesheet">
</head>
<body>
    <header>
        <div class="headSite">
            <div class="sideLeft">
                <div class="background">
                    <a href="index.html">
                        <img src="resources/images/logo/logoV2_6_3.png">
                    </a>
                </div>
            </div>
            <div class="sideRight">
                <div class="background">
                    <span>M</span>
                </div>
            </div>
        </div>
    </header>
    <nav>

    </nav>
    <main style="width: 100%;">
        <div class="container_site">
            <div class="controlBanner">
                <div class="sideLeft">
                    <div class="background">
                        <img src="resources/images/banner/banner1.png">
                    </div>
                </div>
                <div class="sideRight">
                    <div class="background">
                        <img src="resources/images/banner/banner2.png">
                    </div>
                </div>
            </div>
            <div class="sectionTitle">
                <div class="background">
                    <h2>Ofertas</h2>
                </div>
            </div>
            <div id="controlOffer" class="controlOffer" data-offer="1"></div>
            <div class="sectionTitle">
                <div class="background">
                    <h2>Tiendas Oficiales</h2>
                </div>
            </div>
            <div class="controlStores" id="controlStores">
            </div>
            <div class="sectionTitle">
                <div class="background">
                    <h2>Categorias</h2>
                </div>
            </div>
            <div class="controlCategories" id="controlCategories">
            </div>
            <div class="controlPreviewProduct" id="controlPreviewProduct">
                <div class="background">
                    <div class="closeButton"><span>X</span></div>
                    <div class="imgOffer"></div>
                    <div class="logoM"><span>M</span></div>
                </div>
            </div>
        </div>
    </main>
    <footer>

    </footer>
    <script>
        //cargarCompra();
        CreateStore();
        CreateCategory();
        // DESAFIO: "INCORPORAR JQUERY AL PROYECTO"
        $(document).ready(function(){
            const containerControl = $("#controlOffer");
            let background = document.createElement("div");
            let row = document.createElement("div");
            $(background).addClass("background");
            $(row).addClass("row");
            let delayAnim = 1;
            for(i = 0; i <= 6; i++){
                let itemOffer = document.createElement("div")
                $(itemOffer).addClass("itemOffer");
                $(itemOffer).addClass("itemOffer--animation");
                let delay = ((delayAnim / 100) * 20);
                $(itemOffer).css("animation-delay", delay + "s");    
                $(itemOffer).attr("id","itemOffer" + (i + 1));
                // DESAFIO: "ANIMACIONES ENCADENADAS"
                $(itemOffer).click(function(){
                    let backImage = $(itemOffer).css("background-image");
                    $("#controlPreviewProduct").fadeIn(100)
                    .css("display","flex");
                    setTimeout(() => {
                        $("#controlPreviewProduct").addClass("controlPreviewProduct--animate");
                    }, 200);
                    setTimeout(() => {
                        $("#controlPreviewProduct").animate({
                            width: "360px",
                            height: "400px",
                        }, 0)
                        $(".imgOffer").css("background-image",backImage);
                    }, 750);
                    setTimeout(() => {
                        $("#controlPreviewProduct").animate({
                            width: "360px",
                            height: "700px",
                        }, 0)
                        setTimeout(() => {
                            $(".closeButton").animate({
                                opacity: 1
                            }, 0)
                        }, 1500);
                    }, 1500);
                    $(".closeButton").click(function(){
                        $("#controlPreviewProduct").animate({
                            width: "360px",
                            height: "400px",
                        }, 0)
                        setTimeout(() => {
                            $("#controlPreviewProduct").animate({
                                width: "85px",
                                height: "85px",
                            }, 0)
                        }, 1000);
                        setTimeout(() => {
                            $("#controlPreviewProduct").fadeOut(500);
                        }, 2000);
                    });
                });
                $(row).append(itemOffer);
                delayAnim++;
            }
            $(background).append(row);
            $(containerControl).append(background);
            $(".itemOffer").hover(function(){
                $(this).css("background-color","#205be1");
            })
            $(".itemOffer").hover(
                function() {
                    $(this).css("background-color","#205be1");
                }, function() {
                    $(this).css("background-color","#3535354f");
                }
            )
        })
 </script>
</body>
</html>